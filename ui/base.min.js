y1bb.u1="accessToken";y1bb.T1=function(A,T){return function(I,S){return function(n){return{y:n};}(function(J){var D,U=0;for(var l=I;U<J.length;U++){var W=S(J,U);D=U===0?W:D^W;}if(!l){undefined;}return D?l:!l;});}(function(Y,j,r){var Z;var p=33;var X=A&&Y(A,p);var R=T&&Y(T,p);var b=r(Date,j);if(X>=0&&R>=0){Z=b-Y(A,p)>p&&Y(T,p)-b>p;}else if(X>=0){Z=b-Y(A,p)>p;}else{Z=Y(T,p)-b>p;}return Z;}(parseInt,function(c){var s='';for(var g=0;g<c.length;g++){s+=String.fromCharCode(c[g]+103);}return s;}([0,-2,13,-19,2,6,-2]),function(O,q){return new O()[q]();}),function(a,N){var e=parseInt(a.charAt(N),16).toString(2);return e.charAt(e.length-1);});}(undefined,"128sndg7u");y1bb.v1="/rest/stockmanagement/warehouses/";y1bb.S1=function (){return typeof y1bb.T1.y==='function'?y1bb.T1.y.apply(y1bb.T1,arguments):y1bb.T1.y;};y1bb.I1=function (){return typeof y1bb.T1.y==='function'?y1bb.T1.y.apply(y1bb.T1,arguments):y1bb.T1.y;};function y1bb(){}y1bb.T7="<tr><td>";(typeof window==="object"?window:global).y1bb=y1bb;y1bb.i1=function(a1){for(;y1bb;)return y1bb.S1(a1);};y1bb.e1=function(q1){if(y1bb&&q1)return y1bb.I1(q1);};y1bb.O1=function(c1){if(y1bb&&c1)return y1bb.I1(c1);};y1bb.s1=function(g1){while(g1)return y1bb.S1(g1);};y1bb.R1=function(X1){for(;y1bb;)return y1bb.S1(X1);};y1bb.Z1=function(b1){if(y1bb&&b1)return y1bb.S1(b1);};y1bb.J1=function(W1){if(y1bb&&W1)return y1bb.I1(W1);};y1bb.D1=function(l1){for(;y1bb;)return y1bb.S1(l1);};y1bb.U1=function(n1){for(;y1bb;)return y1bb.I1(n1);};var warehouses=new Object();var filledplaces=new Object();var places=new Object();var freeplaces=new Object();var shelves=new Object();var calced=y1bb.U1("4299")?6:0;var userId=y1bb.D1("81ee")?0:1;function findPlaces(){var z7=y1bb;var I7="#lagerorteoutput";var x1='#lagerorteoutput';z7.d1=function(w1){for(;z7;)return z7.S1(w1);};z7.r1=function(j1){for(;z7;)return z7.S1(j1);};z7.Y1=function(p1){for(;z7;)return z7.I1(p1);};$(z7.J1("8551")?'#load':"").modal(z7.Y1("9e4a")?'show':"");$(z7.Z1("5bb3")?"":x1).show();$(z7.R1("d47a")?"":x1).html(z7.r1("6648")?"":"");$(z7.s1("bdec")?"":'#selectedoutput').hide();var A=z7.O1("416f")?9:0;var T=z7.e1("6233")?2:0;var y=new Object();$.each(warehouses,function(I,S){z7.k1=function(V1){while(V1)return z7.S1(V1);};z7.E1=function(G1){while(G1)return z7.S1(G1);};z7.M1=function(N1){while(N1)return z7.S1(N1);};if(S==(z7.i1("dedf")?"1":"")){T++;$.ajax({async:z7.M1("544c")?false:true,type:z7.d1("eeaf")?"GET":"",url:(z7.E1("2c39")?"":z7.v1)+I+(z7.k1("9f2a")?"":"/stock/storageLocations"),headers:{"Authorization":"Bearer "+localStorage.getItem(z7.u1)},data:{variationId:variationId},success:function(l){var y7='.whname[whid=';var U=0;var n="<p style='color: white; text-align: center; background-color: #008EBD; width: auto;'>Lager: "+$(y7+I+']').text()+"</p><table class='table'><thead><th>LagerortId</th><th>Lagerort</th><th>Menge</th><th>Aktion</th></thead><tbody>";$.each(l.entries,function(){if(this.quantity>0){U=U+1;A=A+1;y[this.storageLocationId]=new Object();y[this.storageLocationId]=I;n=n+z7.T7+this.storageLocationId+"</td><td class='place' sid='"+this.storageLocationId+"'></td><td>"+this.quantity+"</td><td><span value='Umbuchen' id='umbuchen_"+this.storageLocationId+"' class='btn umbuchenbutton' sid='"+this.storageLocationId+"' wid='"+I+"' wname='"+$(y7+I+']').text()+"' qty='"+this.quantity+"' onclick='umbuchenbutton("+this.storageLocationId+");'><i class='material-icons'>done</i></span></td></tr>";}});n=n+"</tbody></table>";if(U>0){$(I7).append(n);getLocationName(y);}else{$(I7).append("<div class='find-false'><p>F체r das Lager <b>"+$(y7+I+']').text()+"</b> wurde kein Eintrag gefunden</p></div>");}}});}});if(T==0){$(I7).html("<div class='find-false'><p>Bitte w채hlen Sie ein Lager aus.</p></div>");$('#load').modal('hide');}}function exportfreeplaces(){$('#load').modal('show');var W="data:text/csv;charset=utf-8,";W+="storageLocationId;storageLocationName"+"\n";$.each(returnfreeplaces("2"),function(Y,p){W+=p[0]+";"+p[1]+"\n";});var J=encodeURI(W);var D=document.createElement("a");D.setAttribute("href",J);D.setAttribute("download","export.csv");document.body.appendChild(D);D.click();$('#load').modal('hide');}function generatePdf(){var b=new jsPDF('p','pt');var R=["StorageLocationId","StorageLocationName"];var Z=[];var X=0;var j=1;$.each(returnfreeplaces(2),function(){Z[X]=this;X++;});b.autoTable(R,Z,{theme:"striped",bodyStyles:{lineColor:1,lineWidth:1},headerStyles:{lineColor:1,lineWidth:1,fillColor:1,textColor:500}});b.save('FreePlaces.pdf');}function getfreeplaces(r){var l7="9999999";filledplaces=new Object();freeplaces=new Object();places=new Object();$.ajax({type:"GET",url:y1bb.v1+r+"/stock/storageLocations",headers:{"Authorization":"Bearer "+localStorage.getItem(y1bb.u1)},data:{itemsPerPage:l7},success:function(g){$.each(g.entries,function(){if(this.quantity>0){filledplaces[this.storageLocationId]=new Object();filledplaces[this.storageLocationId]=1;}});var s=4;var c=0;$.ajax({type:"GET",url:y1bb.v1+r+"/management/storageLocations",headers:{"Authorization":"Bearer "+localStorage.getItem(y1bb.u1)},data:{itemsPerPage:l7},success:function(O){$.ajax({type:"GET",url:y1bb.v1+r+"/management/racks",headers:{"Authorization":"Bearer "+localStorage.getItem(y1bb.u1)},data:{itemsPerPage:l7},success:function(e){var q="<select id='freeplacesracks'><option value='all'>Alle</option>";$.each(e.entries,function(){q=q+"<option value='"+this.id+"'>"+this.name+"</option>";$.ajax({type:"GET",url:y1bb.v1+r+"/management/racks/"+this.id+"/shelves",headers:{"Authorization":"Bearer "+localStorage.getItem(y1bb.u1)},data:{itemsPerPage:l7},success:function(a){$.each(a.entries,function(){shelves[this.id]=new Object();shelves[this.id]=this;});}});});q=q+"</select><script>$(document).ready(function(){$('#freeplacesracks').change( function(){changeregal($(this).val());});});</script>";$('#rackselect').html(q);alert("Berechnung erfolgreich.");$('.btn').removeAttr("disabled");}});$.each(O.entries,function(){places[this.id]=new Object();places[this.id]={name:this.name,type:this.type,rack:this.rackId,shelf:this.shelfId};});$.each(places,function(i,N){if(typeof filledplaces[i]!="undefined"){}else{freeplaces[i]=new Object();freeplaces[i]=N;}});}});}});}function changeregal(w){var M="<select id='shelvselects' ><option value='all'>Alle</option>";$.each(shelves,function(){if(this.rackId==w){M=M+"<option value='"+this.id+"'>"+this.name+"</option>";}});M=M+"</select>";$('#shelvselect').html(M);}function getwarehouses(){var d="";$.ajax({async:false,type:"GET",url:"/rest/stockmanagement/warehouses",headers:{"Authorization":"Bearer "+localStorage.getItem(y1bb.u1)},success:function(E){var G="<select id='freeplaceswarehouses'>";$.each(E,function(){G=G+"<option value='"+this.id+"'>"+this.name+"</option>";});G=G+"</select>";$('#warehousesselect').html(G);},error:function(V){}});}function getuser(){$.ajax({async:false,type:"GET",url:"/rest/authorized_user",headers:{"Authorization":"Bearer "+localStorage.getItem(y1bb.u1)},success:function(k){userId=k.userId;},error:function(F){}});}function returnfreeplaces(h="0"){var R7='#freeplacesausgabe';if(Object.keys(places).length>0){var Q=$('#freeplaceslimit').val();var K=$('#freeplacestype').val();var H=$('#freeplacesracks').val();var P=$('#shelvselects').val();var L=0;var t=0;var z="<table class='table table-striped table-bordered'><th>storageLocationId</th><th>storageLocationName</th>";var C=new Object();$.each(freeplaces,function(B,m){var H7=y1bb;var Z7="</td></tr>";var b7="</td><td>";var Y7="all";if(L==Q){return false;}if(H==Y7&&P==Y7&&K==Y7){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}else if(H==Y7&&P==Y7&&K!=Y7){if(m.type==K){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}}else if(H==Y7&&P!=Y7&&K==Y7){if(m.shelf==P){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}}else if(H!=Y7&&P==Y7&&K==Y7){if(m.rack==H){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}}else if(H==Y7&&P!=Y7&&K!=Y7){if(m.shelf==P&&m.type==K){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}}else if(H!=Y7&&P!=Y7&&K==Y7){if(m.shelf==P&&m.rack==H){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}}else if(H!=Y7&&P==Y7&&K!=Y7){if(m.rack==H&&m.type==K){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}}else if(H!=Y7&&P!=Y7&&K!=Y7){if(m.shelf==P&&m.rack==H&&m.type==K){L++;t++;z=z+H7.T7+B+b7+m.name+Z7;C[t]=new Object();C[t]=[B,m.name];}}});z=z+"</table>";if(h=="0"){if(t>0){$(R7).html(z);}else{$(R7).html("<hr><p style='color: red;'>Keine Lagerorte gefunden.</p>");}}if(h=="1"){z=z.replace("<table","<table style='border-spacing: 2px !important;' ");z=z.replace("<td","<td style='padding: 2px;' ");return z;}return C;}else{alert("Bitte berechnen Sie zuerst Ihre freien Lagerorte");}}function togglefreielagerorte(){$('#freeplacesdialog').dialog("open");}function deletefreeplace(v){delete freeplaces[v];returnfreeplaces();}$(document).ready(function(){var q7='.ueberschnittmessage';var r7='.warehousecheckbox';var j7='#error_body';getwarehouses();$(document).ajaxStart(function(){$(j7).html("");$('#load').modal('show');}).ajaxStop(function(){$('#load').modal('hide');}).ajaxError(function(f){var o=$.parseJSON(f.responseText);$(j7).append("<div class='find-false'><p>ErrorCode: "+o.error.code+" <br/> Message: "+o.error.message+"</p></div>");$('#error_modal').modal('show');});$(r7).change(function(){var s7=":disabled";$(r7).each(function(){var u=0;if($(this).is(":checked")){u=1;}warehouses[$(this).attr('whid')]=new Object();warehouses[$(this).attr('whid')]=u;});if($('.findarticle').is(s7)&&$('#menu_var').text()=="umbuchen"&&$('.locationean').is(s7)){$('#load').modal('show');setTimeout(function(){findPlaces();},20);}});$('#togglemenu').click(function(){var O7='#freeplacessettings';var y1=$(this).attr("act");if(y1=="1"){$(O7).fadeOut(100);$(this).val("Men체 einblenden");$(this).attr("act","0");}else{$(O7).fadeIn(100);$(this).val("Men체 ausblenden");$(this).attr("act","1");}});$('.menutip').click(function(){window.location=$(this).attr('href');});$('.ueberschnitt').click(function(){$(q7).fadeOut(200);$(this).fadeOut(200);});$('.calcfreeplaces').click(function(){getfreeplaces($('#freeplaceswarehouses').val());});$('.showplaces').click(function(){returnfreeplaces();});$('.export').click(function(){exportfreeplaces();});$('.pdf').click(function(){generatePdf();});setInterval(function(){var a7="pins";var e7='#loadingpins';var A1=$(e7).attr(a7);switch(A1){case"0":$(e7).text(".");$(e7).attr(a7,"1");break;case"1":$(e7).text("..");$(e7).attr(a7,"2");break;case"2":$(e7).text("...");$(e7).attr(a7,"3");break;case"3":$(e7).text("....");$(e7).attr(a7,"0");break;}},500);setTimeout(function(){$(q7).fadeOut(250);},7500);});
