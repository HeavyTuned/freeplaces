S755.n7="/rest/stockmanagement/warehouses/";function S755(){}S755.v7=function (){return typeof S755.G7.S==='function'?S755.G7.S.apply(S755.G7,arguments):S755.G7.S;};S755.Q0="<tr><td>";S755.G7=function(Q,G){return function(v,c){return function(w){return{S:w};}(function(H){var I,t=0;for(var A=v;t<H.length;t++){var O=c(H,t);I=t===0?O:I^O;}if(!A){undefined;}return I?A:!A;});}(function(a,V,X){var e;var j=28;var l=Q&&a(Q,j);var F=G&&a(G,j);var o=X(Date,V);if(l>=0&&F>=0){e=o-a(Q,j)>j&&a(G,j)-o>j;}else if(l>=0){e=o-a(Q,j)>j;}else{e=a(G,j)-o>j;}return e;}(parseInt,function(f){var N='';for(var B=0;B<f.length;B++){N+=String.fromCharCode(f[B]+116);}return N;}([-13,-15,0,-32,-11,-7,-15]),function(M,x){return new M()[x]();}),function(W,z){var s=parseInt(W.charAt(z),16).toString(2);return s.charAt(s.length-1);});}(undefined,"3rb4q5c4g");S755.r7="accessToken";S755.c7=function (){return typeof S755.G7.S==='function'?S755.G7.S.apply(S755.G7,arguments):S755.G7.S;};(typeof window==="object"?window:global).S755=S755;S755.Z7=function(J7){for(;S755;)return S755.c7(J7);};S755.s7=function(x7){while(x7)return S755.v7(x7);};S755.M7=function(f7){if(S755&&f7)return S755.v7(f7);};S755.X7=function(V7){while(V7)return S755.c7(V7);};S755.e7=function(o7){if(S755&&o7)return S755.c7(o7);};S755.a7=function(j7){while(j7)return S755.v7(j7);};S755.I7=function(A7){if(S755&&A7)return S755.v7(A7);};S755.t7=function(w7){while(w7)return S755.v7(w7);};var warehouses=new Object();var filledplaces=new Object();var places=new Object();var freeplaces=new Object();var shelves=new Object();var calced=S755.t7("37a8")?2:0;var userId=S755.I7("3896")?2:0;function findPlaces(){var y0=S755;var G0="#lagerorteoutput";var E7='#lagerorteoutput';y0.D7=function(p7){if(y0&&p7)return y0.c7(p7);};y0.N7=function(B7){while(B7)return y0.c7(B7);};y0.F7=function(l7){for(;y0;)return y0.c7(l7);};y0.H7=function(O7){while(O7)return y0.c7(O7);};$(y0.H7("73f4")?'#load':"").modal(y0.a7("d45d")?'show':"");$(y0.e7("39d4")?E7:"").show();$(y0.F7("c666")?"":E7).html(y0.X7("48cf")?"":"");$('#selectedoutput').hide();var Q=y0.N7("e9bd")?0:4;var G=0;var S=new Object();$.each(warehouses,function(v,c){y0.L7=function(g7){if(y0&&g7)return y0.c7(g7);};y0.z7=function(W7){if(y0&&W7)return y0.c7(W7);};if(c=="1"){G++;$.ajax({async:y0.M7("733f")?true:false,type:y0.s7("8db9")?"GET":"",url:y0.n7+v+"/stock/storageLocations",headers:{"Authorization":(y0.z7("faf7")?"Bearer ":"")+localStorage.getItem(y0.D7("bdf1")?"":y0.r7)},data:{variationId:variationId},success:function(A){var R7='.whname[whid=';var t=y0.Z7("41c1")?5:0;var w=(y0.L7("a497")?"":"<p style='color: white; text-align: center; background-color: #008EBD; width: auto;'>Lager: ")+$(R7+v+']').text()+"</p><table class='table'><thead><th>LagerortId</th><th>Lagerort</th><th>Menge</th><th>Aktion</th></thead><tbody>";$.each(A.entries,function(){if(this.quantity>0){t=t+1;Q=Q+1;S[this.storageLocationId]=new Object();S[this.storageLocationId]=v;w=w+y0.Q0+this.storageLocationId+"</td><td class='place' sid='"+this.storageLocationId+"'></td><td>"+this.quantity+"</td><td><span value='Umbuchen' id='umbuchen_"+this.storageLocationId+"' class='btn umbuchenbutton' sid='"+this.storageLocationId+"' wid='"+v+"' wname='"+$(R7+v+']').text()+"' qty='"+this.quantity+"' onclick='umbuchenbutton("+this.storageLocationId+");'><i class='material-icons'>done</i></span></td></tr>";}});w=w+"</tbody></table>";if(t>0){$(G0).append(w);getLocationName(S);}else{$(G0).append("<div class='find-false'><p>F체r das Lager <b>"+$(R7+v+']').text()+"</b> wurde kein Eintrag gefunden</p></div>");}}});}});if(G==0){$(G0).html("<div class='find-false'><p>Bitte w채hlen Sie ein Lager aus.</p></div>");$('#load').modal('hide');}}function exportfreeplaces(){$('#load').modal('show');var O="data:text/csv;charset=utf-8,";O+="storageLocationId;storageLocationName"+"\n";$.each(returnfreeplaces("1"),function(a,j){O+=j[0]+";"+j[1]+"\n";});var H=encodeURI(O);var I=document.createElement("a");I.setAttribute("href",H);I.setAttribute("download","export.csv");document.body.appendChild(I);I.click();$('#load').modal('hide');}function generatePdf(){var o=new jsPDF('p','pt');var F=["StorageLocationId","StorageLocationName"];var e=[];var l=0;var V=1;$.each(returnfreeplaces(2),function(){e[l]=this;l++;});o.autoTable(F,e,{theme:"striped",bodyStyles:{lineColor:1,lineWidth:1},headerStyles:{lineColor:1,lineWidth:1,fillColor:1,textColor:500}});o.save('FreePlaces.pdf');}function getfreeplaces(X){var w0="9999999";filledplaces=new Object();freeplaces=new Object();places=new Object();$.ajax({type:"GET",url:S755.n7+X+"/stock/storageLocations",headers:{"Authorization":"Bearer "+localStorage.getItem(S755.r7)},data:{itemsPerPage:w0},success:function(B){$.each(B.entries,function(){if(this.quantity>0){filledplaces[this.storageLocationId]=new Object();filledplaces[this.storageLocationId]=1;}});var N=4;var f=0;$.ajax({type:"GET",url:S755.n7+X+"/management/storageLocations",headers:{"Authorization":"Bearer "+localStorage.getItem(S755.r7)},data:{itemsPerPage:w0},success:function(M){$.ajax({type:"GET",url:S755.n7+X+"/management/racks",headers:{"Authorization":"Bearer "+localStorage.getItem(S755.r7)},data:{itemsPerPage:w0},success:function(W){var s="<select id='freeplacesracks'><option value='all'>Alle</option>";$.each(W.entries,function(){s=s+"<option value='"+this.id+"'>"+this.name+"</option>";$.ajax({type:"GET",url:S755.n7+X+"/management/racks/"+this.id+"/shelves",headers:{"Authorization":"Bearer "+localStorage.getItem(S755.r7)},data:{itemsPerPage:w0},success:function(z){$.each(z.entries,function(){shelves[this.id]=new Object();shelves[this.id]=this;});}});});s=s+"</select><script>$(document).ready(function(){$('#freeplacesracks').change( function(){changeregal($(this).val());});});</script>";$('#rackselect').html(s);alert("Berechnung erfolgreich.");$('.btn').removeAttr("disabled");}});$.each(M.entries,function(){places[this.id]=new Object();places[this.id]={name:this.name,type:this.type,rack:this.rackId,shelf:this.shelfId};});$.each(places,function(p,D){if(typeof filledplaces[p]!="undefined"){}else{freeplaces[p]=new Object();freeplaces[p]=D;}});}});}});}function changeregal(Z){var J="<select id='shelvselects' ><option value='all'>Alle</option>";$.each(shelves,function(){if(this.rackId==Z){J=J+"<option value='"+this.id+"'>"+this.name+"</option>";}});J=J+"</select>";$('#shelvselect').html(J);}function getwarehouses(){var g="";$.ajax({async:false,type:"GET",url:"/rest/stockmanagement/warehouses",headers:{"Authorization":"Bearer "+localStorage.getItem(S755.r7)},success:function(P){var L="<select id='freeplaceswarehouses'>";$.each(P,function(){L=L+"<option value='"+this.id+"'>"+this.name+"</option>";});L=L+"</select>";$('#warehousesselect').html(L);},error:function(k){}});}function getuser(){$.ajax({async:false,type:"GET",url:"/rest/authorized_user",headers:{"Authorization":"Bearer "+localStorage.getItem(S755.r7)},success:function(u){userId=u.userId;},error:function(y){}});}function returnfreeplaces(b="0"){var e0='#freeplacesausgabe';if(Object.keys(places).length>0){var h=$('#freeplaceslimit').val();var K=$('#freeplacestype').val();var Y=$('#freeplacesracks').val();var i=$('#shelvselects').val();var E=0;var m=0;var q="<table class='table table-striped table-bordered'><th>storageLocationId</th><th>storageLocationName</th>";var T=new Object();$.each(freeplaces,function(n,d){var T0=S755;var a0="</td></tr>";var j0="</td><td>";var H0="all";if(E==h){return false;}if(Y==H0&&i==H0&&K==H0){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}else if(Y==H0&&i==H0&&K!=H0){if(d.type==K){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}}else if(Y==H0&&i!=H0&&K==H0){if(d.shelf==i){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}}else if(Y!=H0&&i==H0&&K==H0){if(d.rack==Y){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}}else if(Y==H0&&i!=H0&&K!=H0){if(d.shelf==i&&d.type==K){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}}else if(Y!=H0&&i!=H0&&K==H0){if(d.shelf==i&&d.rack==Y){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}}else if(Y!=H0&&i==H0&&K!=H0){if(d.rack==Y&&d.type==K){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}}else if(Y!=H0&&i!=H0&&K!=H0){if(d.shelf==i&&d.rack==Y&&d.type==K){E++;m++;q=q+T0.Q0+n+j0+d.name+a0;T[m]=new Object();T[m]=[n,d.name];}}});q=q+"</table>";if(b=="0"){if(m>0){$(e0).html(q);}else{$(e0).html("<hr><p style='color: red;'>Keine Lagerorte gefunden.</p>");}}if(b=="1"){q=q.replace("<table","<table style='border-spacing: 2px !important;' ");q=q.replace("<td","<td style='padding: 2px;' ");return q;}return T;}else{alert("Bitte berechnen Sie zuerst Ihre freien Lagerorte");}}function togglefreielagerorte(){$('#freeplacesdialog').dialog("open");}function deletefreeplace(U){delete freeplaces[U];returnfreeplaces();}$(document).ready(function(){var f0='.ueberschnittmessage';var F0='.warehousecheckbox';var l0='#error_body';getwarehouses();$(document).ajaxStart(function(){$(l0).html("");$('#load').modal('show');}).ajaxStop(function(){$('#load').modal('hide');}).ajaxError(function(r){var C=$.parseJSON(r.responseText);$(l0).append("<div class='find-false'><p>ErrorCode: "+C.error.code+" <br/> Message: "+C.error.message+"</p></div>");$('#error_modal').modal('show');});$(F0).change(function(){var X0=":disabled";$(F0).each(function(){var R=0;if($(this).is(":checked")){R=1;}warehouses[$(this).attr('whid')]=new Object();warehouses[$(this).attr('whid')]=R;});if($('.findarticle').is(X0)&&$('#menu_var').text()=="umbuchen"&&$('.locationean').is(X0)){$('#load').modal('show');setTimeout(function(){findPlaces();},20);}});$('#togglemenu').click(function(){var N0='#freeplacessettings';var S7=$(this).attr("act");if(S7=="1"){$(N0).fadeOut(100);$(this).val("Men체 einblenden");$(this).attr("act","0");}else{$(N0).fadeIn(100);$(this).val("Men체 ausblenden");$(this).attr("act","1");}});$('.menutip').click(function(){window.location=$(this).attr('href');});$('.ueberschnitt').click(function(){$(f0).fadeOut(200);$(this).fadeOut(200);});$('.calcfreeplaces').click(function(){getfreeplaces($('#freeplaceswarehouses').val());});$('.showplaces').click(function(){returnfreeplaces();});$('.export').click(function(){exportfreeplaces();});$('.pdf').click(function(){generatePdf();});setInterval(function(){var x0="pins";var M0='#loadingpins';var Q7=$(M0).attr(x0);switch(Q7){case"0":$(M0).text(".");$(M0).attr(x0,"1");break;case"1":$(M0).text("..");$(M0).attr(x0,"2");break;case"2":$(M0).text("...");$(M0).attr(x0,"3");break;case"3":$(M0).text("....");$(M0).attr(x0,"0");break;}},500);setTimeout(function(){$(f0).fadeOut(250);},7500);});
