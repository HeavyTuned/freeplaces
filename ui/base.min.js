!function e(t,a,n){function r(i,s){if(!a[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[i]={exports:{}};t[i][0].call(d.exports,function(e){var a=t[i][1][e];return r(a||e)},d,d.exports,e,t,a,n)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.filledplaces={},this.places={},this.freeplaces={},this.zones={},this.config={storageLocationIDStart:12140,storageLocationIDEnd:null,warehouseID:1},this.loadFreePlaces(),$(".calcplaces").click(function(){this.loadFreePlaces()}),$(".showplaces").click(function(){this.displayFreePlaces()}),$(".export").click(function(){this.exportFreePlacesAsCSV()}),$(".pdf").click(function(){this.exportFreePlacesAsPDF()}),$(document).ajaxStart(function(){$("#error_body").html(""),$("#load").modal("show")}).ajaxStop(function(){$("#load").modal("hide")}).ajaxError(function(e){var t=$.parseJSON(e.responseText);$("#error_body").append("<div class='find-false'><p>ErrorCode: "+t.error.code+" <br/> Message: "+t.error.message+"</p></div>"),$("#error_modal").modal("show")}),setInterval(function(){switch($("#loadingpins").attr("pins")){case"0":$("#loadingpins").text("."),$("#loadingpins").attr("pins","1");break;case"1":$("#loadingpins").text(".."),$("#loadingpins").attr("pins","2");break;case"2":$("#loadingpins").text("..."),$("#loadingpins").attr("pins","3");break;case"3":$("#loadingpins").text("...."),$("#loadingpins").attr("pins","0")}},500),setTimeout(function(){$(".ueberschnittmessage").fadeOut(250)},7500)}return r(e,[{key:"getJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];$.ajax({type:"GET",url:"/rest/stockmanagement/warehouses/"+this.config.warehouseId+"/stock/storageLocations",headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")},data:t,success:function(e){a(e)},error:function(e,n){a(t)}})}},{key:"loadFreePlaces",value:function(){this.getJSON("/rest/stockmanagement/warehouses/"+this.config.warehouseID+"/stock/storageLocations",{itemsPerPage:"9999999"},function(e){$.each(e.entries,function(e){if(e.quantity>0){if(e.storageLocationId<=12140)return!0;this.filledplaces[e.storageLocationId]={},this.filledplaces[e.storageLocationId]=1}});this.getJSON("/rest/stockmanagement/warehouses/"+this.config.warehouseId+"/management/storageLocations",{itemsPerPage:"9999999"},function(e){$.each(e.entries,function(e){return e.id<this.config.storageLocationIDStart||(null!==e.id&&e.id>this.config.storageLocationIDEnd||(this.places[e.id]={},void(this.places[e.id]={name:e.name,type:e.type,rack:e.rackId,shelf:e.shelfId})))}),$.each(this.places,function(e,t){if(void 0!==this.filledplaces[e]);else{this.freeplaces[e]={},this.freeplaces[e]=t;var a=t.name.split("-");this.zones[a[0]]=a[0]}})})})}},{key:"getFreePlaces",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Object.keys(this.places).length>0){var t=$("#freeplaceslimit").val(),a=$("#zoneSelect").val(),n=0,r=0,o="<table class='table table-striped table-bordered'><th>storageLocationId</th><th>storageLocationName</th>",i={};return $.each(this.freeplaces,function(e,s){return!(n>=t)&&("Alle"!=a&&-1==s.name.indexOf(a)||(n++,r++,o=o+"<tr><td>"+e+"</td><td>"+s.name+"</td></tr>",i[r]={},void(i[r]=[e,s.name])))}),o+="</table>","0"==e&&(r>0?$("#freeplacesausgabe").html(o):$("#freeplacesausgabe").html("<hr><p style='color: red;'>Keine Lagerorte gefunden.</p>")),"1"==e?(o=o.replace("<table","<table style='border-spacing: 2px !important;' "),o=o.replace("<td","<td style='padding: 2px;' ")):i}alert("Bitte berechnen Sie zuerst Ihre freien Lagerorte")}},{key:"displayFreePlaces",value:function(){}},{key:"exportFreePlacesAsPDF",value:function(){var e=new jsPDF("p","pt"),t=["StorageLocationId","StorageLocationName"],a=[],n=0;$.each(this.returnfreeplaces(2),function(){a[n]=this,n++}),e.autoTable(t,a,{theme:"striped",bodyStyles:{lineColor:1,lineWidth:1},headerStyles:{lineColor:1,lineWidth:1,fillColor:1,textColor:500}}),e.save("FreePlaces.pdf")}},{key:"exportFreePlacesAsCSV",value:function(){$("#load").modal("show");var e="data:text/csv;charset=utf-8,";e+="storageLocationId;storageLocationName\n",$.each(this.returnfreeplaces("2"),function(t,a){e+=a[0]+";"+a[1]+"\n"});var t=encodeURI(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","export.csv"),document.body.appendChild(a),a.click(),$("#load").modal("hide")}}]),e}();$(function(){new o})},{}]},{},[1]);