!function e(t,o,a){function n(i,s){if(!o[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){var o=t[i][1][e];return n(o||e)},u,u.exports,e,t,o,a)}return o[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(e,t,o){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),r=function(){function e(){var t=this;a(this,e),this.filledplaces={},this.places={},this.freeplaces=[],this.zones={},this.config={storageLocationIDStart:12140,storageLocationIDEnd:null,warehouseId:1},this.countDots=1,this.loadFreePlaces(),$(".calcplaces").click(function(){t.loadFreePlaces()}),$(".showplaces").click(function(){t.displayFreePlaces()}),$(".export").click(function(){t.exportFreePlacesAsCSV()}),$(".pdf").click(function(){t.exportFreePlacesAsPDF()}),$(document).ajaxStart(function(){$("#error_body").html(""),$("#load").modal("show")}).ajaxStop(function(){$("#load").modal("hide")}).ajaxError(function(e){var t=$.parseJSON(e.responseText);$("#error_body").append("<div class='find-false'><p>ErrorCode: "+t.error.code+" <br/> Message: "+t.error.message+"</p></div>"),$("#error_modal").modal("show")}),setInterval(function(){$("#loadingpins").text(".".repeat(this.countDots)),this.countDots=this.countDots+1,this.countDots>3&&(this.countDots=1)},500),setTimeout(function(){$(".ueberschnittmessage").fadeOut(250)},7500)}return n(e,[{key:"getJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];$.ajax({type:"GET",url:e,headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")},data:t,success:function(e){o(e)},error:function(e,a){o(t)}})}},{key:"compare",value:function(e,t){return e.position<t.position?-1:e.position>t.position?1:0}},{key:"loadFreePlaces",value:function(){var e=this;$("#load").show(),this.getJSON("/rest/stockmanagement/warehouses/"+this.config.warehouseId+"/stock/storageLocations",{itemsPerPage:"9999999"},function(t){$.each(t.entries,function(t,o){if(o.quantity>0){if(o.storageLocationId<=12140)return!0;e.filledplaces[o.storageLocationId]={},e.filledplaces[o.storageLocationId]=1}});e.getJSON("/rest/stockmanagement/warehouses/"+e.config.warehouseId+"/management/storageLocations",{itemsPerPage:"9999999"},function(t){$.each(t.entries,function(t,o){if(o.id<e.config.storageLocationIDStart)return!0;e.places[o.id]={},e.places[o.id]={name:o.name,position:o.position,id:o.id}}),$("#zoneSelect").empty().append('<option value="Alle">Alle</option>'),$.each(e.places,function(t,o){if(void 0===e.filledplaces[t]){e.freeplaces.push(o);var a=o.name.split("-");void 0==e.zones[a[0]]&&$("#zoneSelect").append('<option value="'+a[0]+'">'+a[0]+"</option>"),e.zones[a[0]]=a[0]}}),e.freeplaces.sort(e.compare),$("#load").hide()})})}},{key:"getFreePlaces",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Object.keys(this.places).length>0){var t=$("#freeplaceslimit").val(),o=$("#zoneSelect").val(),a=0,n="<table class='table table-striped table-bordered'><th>storageLocationId</th><th>storageLocationName</th>",r={};return $.each(this.freeplaces,function(e,i){return"Alle"!=o&&-1==i.name.indexOf(o+"-")||!(a>=t)&&(a++,n=n+"<tr><td>"+i.id+'</td><td data-position="'+i.position+'">'+i.name+"</td></tr>",r[a]={},void(r[a]=[i.id,i.name]))}),n+="</table>","0"==e&&$("#freeplacesausgabe").html(a>0?n:"<hr><p style='color: red;'>Keine Lagerorte gefunden.</p>"),"1"==e?(n=n.replace("<table","<table style='border-spacing: 2px !important;' "),n=n.replace("<td","<td style='padding: 2px;' ")):r}alert("Bitte berechnen Sie zuerst Ihre freien Lagerorte")}},{key:"displayFreePlaces",value:function(){this.getFreePlaces(0)}},{key:"exportFreePlacesAsPDF",value:function(){var e=new jsPDF("p","pt"),t=["StorageLocationId","StorageLocationName"],o=[],a=0;$.each(this.getFreePlaces(2),function(e,t){o[a]=t,a++}),e.autoTable(t,o,{theme:"striped",bodyStyles:{lineColor:1,lineWidth:1},headerStyles:{lineColor:1,lineWidth:1,fillColor:1,textColor:500}}),e.save("FreePlaces.pdf")}},{key:"exportFreePlacesAsCSV",value:function(){$("#load").modal("show");var e="data:text/csv;charset=utf-8,";e+="storageLocationId;storageLocationName\n",$.each(this.getFreePlaces("2"),function(t,o){e+=o[0]+";"+o[1]+"\n"});var t=encodeURI(e),o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download","export.csv"),document.body.appendChild(o),o.click(),$("#load").modal("hide")}}]),e}();$(function(){new r})},{}]},{},[1]);