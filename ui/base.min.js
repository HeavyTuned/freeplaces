o7AAAA.L = "accessToken";
o7AAAA.B = function() { return typeof o7AAAA.z.o === 'function' ? o7AAAA.z.o.apply(o7AAAA.z, arguments) : o7AAAA.z.o; };

function o7AAAA() {}
o7AAAA.p = function() { return typeof o7AAAA.z.o === 'function' ? o7AAAA.z.o.apply(o7AAAA.z, arguments) : o7AAAA.z.o; };
o7AAAA.N = "/rest/stockmanagement/warehouses/";
o7AAAA.K = function() { return typeof o7AAAA.z.o === 'function' ? o7AAAA.z.o.apply(o7AAAA.z, arguments) : o7AAAA.z.o; };
o7AAAA.I = function() { return typeof o7AAAA.z.o === 'function' ? o7AAAA.z.o.apply(o7AAAA.z, arguments) : o7AAAA.z.o; };
o7AAAA.g = function() { return typeof o7AAAA.z.o === 'function' ? o7AAAA.z.o.apply(o7AAAA.z, arguments) : o7AAAA.z.o; };
o7AAAA.z = function(a, P) { return function(H, d) { return function(i) { return { o: i }; }(function(y) { var V, v = 0; for (var w = H; v < y.length; v++) { var M = d(y, v);
                V = v === 0 ? M : V ^ M; } if (!w) { undefined; } return V ? w : !w; }); }(function(c, D, Y, Q) { var L; var N = 32; var Z = a && c(a, N); var T = P && c(P, N); var n = Q(D, Y); if (Z >= 0 && T >= 0) { L = n - c(a, N) > N && c(P, N) - n > N; } else if (Z >= 0) { L = n - c(a, N) > N; } else { L = c(P, N) - n > N; } return L; }(parseInt, Date, function(b) { return ('' + b).substring(1, (b + '').length - 1); }('$getTimed'), function(q, S) { return new q()[S](); }), function(s, U) { var R = parseInt(s.charAt(U), 16).toString(2); return R.charAt(R.length - 1); }); }(undefined, "1bm0lfi00");
(typeof window === "object" ? window : global).o7AAAA = o7AAAA;
o7AAAA.P7 = function(V7) { while (V7) return o7AAAA.g(V7); };
o7AAAA.F = function(M7) { if (o7AAAA && M7) return o7AAAA.B(M7); };
o7AAAA.e = function(y7) { while (y7) return o7AAAA.B(y7); };
o7AAAA.J = function(N7) { if (o7AAAA && N7) return o7AAAA.K(N7); };
o7AAAA.O = function(c7) { for (; o7AAAA;) return o7AAAA.p(c7); };
var warehouses = new Object();
var filledplaces = new Object();
var places = new Object();
var freeplaces = new Object();
var shelves = new Object();
var calced = o7AAAA.O("e445") ? 0 : 7;

function findPlaces() { o7AAAA.i7 = function(Y7) { while (Y7) return o7AAAA.p(Y7); };
    o7AAAA.a7 = function(Q7) { for (; o7AAAA;) return o7AAAA.g(Q7); };
    o7AAAA.o7 = function(b7) { for (; o7AAAA;) return o7AAAA.I(b7); };
    o7AAAA.j = function(q7) { if (o7AAAA && q7) return o7AAAA.B(q7); };
    o7AAAA.l = function(S7) { for (; o7AAAA;) return o7AAAA.B(S7); }; var n7 = o7AAAA.J("1f92") ? "#lagerorteoutput" : ""; var Z7 = o7AAAA.l("149d") ? '#lagerorteoutput' : "";
    $(o7AAAA.e("9e3e") ? "" : '#load').modal(o7AAAA.F("da43") ? "" : 'show');
    $(Z7).show();
    $(Z7).html(o7AAAA.j("e6b9") ? "" : "");
    $(o7AAAA.o7("6ead") ? '#selectedoutput' : "").hide(); var T7 = o7AAAA.a7("c761") ? 5 : 0; var D7 = o7AAAA.P7("b91a") ? 0 : 8; var L7 = new Object();
    $.each(warehouses, function(R7, s7) { o7AAAA.w7 = function(U7) { while (U7) return o7AAAA.K(U7); };
        o7AAAA.d7 = function(f7) { if (o7AAAA && f7) return o7AAAA.p(f7); };
        o7AAAA.H7 = function(m7) { for (; o7AAAA;) return o7AAAA.p(m7); }; if (s7 == (o7AAAA.H7("d38b") ? "1" : "")) { D7++;
            $.ajax({ async: false, type: "GET", url: o7AAAA.N + R7 + "/stock/storageLocations", headers: { "Authorization": (o7AAAA.d7("64a9") ? "Bearer " : "") + localStorage.getItem(o7AAAA.L) }, data: { variationId: variationId }, success: function(C7) { o7AAAA.v7 = function(x7) { if (o7AAAA && x7) return o7AAAA.p(x7); }; var G7 = o7AAAA.i7("bfdb") ? "" : '.whname[whid='; var u7 = 0; var r7 = "<p style='color: white; text-align: center; background-color: #008EBD; width: auto;'>Lager: " + $(G7 + R7 + (o7AAAA.v7("bd35") ? "" : ']')).text() + (o7AAAA.w7("3c6b") ? "" : "</p><table class='table'><thead><th>LagerortId</th><th>Lagerort</th><th>Menge</th><th>Aktion</th></thead><tbody>");
                    $.each(C7.entries, function() { if (this.quantity > 0) { u7 = u7 + 1;
                            T7 = T7 + 1;
                            L7[this.storageLocationId] = new Object();
                            L7[this.storageLocationId] = R7;
                            r7 = r7 + "<tr><td>" + this.storageLocationId + "</td><td class='place' sid='" + this.storageLocationId + "'></td><td>" + this.quantity + "</td><td><span value='Umbuchen' id='umbuchen_" + this.storageLocationId + "' class='btn umbuchenbutton' sid='" + this.storageLocationId + "' wid='" + R7 + "' wname='" + $(G7 + R7 + ']').text() + "' qty='" + this.quantity + "' onclick='umbuchenbutton(" + this.storageLocationId + ");'><i class='material-icons'>done</i></span></td></tr>"; } });
                    r7 = r7 + "</tbody></table>"; if (u7 > 0) { $(n7).append(r7);
                        getLocationName(L7); } else { $(n7).append("<div class='find-false'><p>Für das Lager <b>" + $(G7 + R7 + ']').text() + "</b> wurde kein Eintrag gefunden</p></div>"); } } }); } }); if (D7 == 0) { $(n7).html("<div class='find-false'><p>Bitte wählen Sie ein Lager aus.</p></div>");
        $('#load').modal('hide'); } }

function exportfreeplaces() { $('#load').modal('show'); var h7 = "data:text/csv;charset=utf-8,";
    h7 += "storageLocationId;storageLocationName" + "\n";
    $.each(returnfreeplaces("1"), function(k7, W7) { h7 += W7[0] + ";" + W7[1] + "\n"; }); var A7 = encodeURI(h7); var t7 = document.createElement("a");
    t7.setAttribute("href", A7);
    t7.setAttribute("download", "export.csv");
    document.body.appendChild(t7);
    t7.click();
    $('#load').modal('hide'); }

function getfreeplaces(X7) { var E7 = "9999999";
    filledplaces = new Object();
    freeplaces = new Object();
    places = new Object();
    $.ajax({ type: "GET", url: o7AAAA.N + X7 + "/stock/storageLocations", headers: { "Authorization": "Bearer " + localStorage.getItem(o7AAAA.L) }, data: { itemsPerPage: E7 }, success: function(z7) { $.each(z7.entries, function() { if (this.quantity > 0) { filledplaces[this.storageLocationId] = new Object();
                    filledplaces[this.storageLocationId] = 1; } }); var B7 = 4; var I7 = 0;
            $.ajax({ type: "GET", url: o7AAAA.N + X7 + "/management/storageLocations", headers: { "Authorization": "Bearer " + localStorage.getItem(o7AAAA.L) }, data: { itemsPerPage: E7 }, success: function(g7) { $.ajax({ type: "GET", url: o7AAAA.N + X7 + "/management/racks", headers: { "Authorization": "Bearer " + localStorage.getItem(o7AAAA.L) }, data: { itemsPerPage: E7 }, success: function(p7) { var K7 = "<select id='freeplacesracks' class='form-control'><option value='all'>Alle</option>";
                            $.each(p7.entries, function() { K7 = K7 + "<option value='" + this.id + "'>" + this.name + "</option>";
                                $.ajax({ type: "GET", url: o7AAAA.N + X7 + "/management/racks/" + this.id + "/shelves", headers: { "Authorization": "Bearer " + localStorage.getItem(o7AAAA.L) }, data: { itemsPerPage: E7 }, success: function(O7) { $.each(O7.entries, function() { shelves[this.id] = new Object();
                                            shelves[this.id] = this; }); } }); });
                            K7 = K7 + "</select><script>$(document).ready(function(){$('#freeplacesracks').change( function(){changeregal($(this).val());});});</script>";
                            $('#rackselect').html(K7);
                            alert("Berechnung erfolgreich."); } });
                    $.each(g7.entries, function() { places[this.id] = new Object();
                        places[this.id] = { name: this.name, type: this.type, rack: this.rackId, shelf: this.shelfId }; });
                    $.each(places, function(J7, l7) { if (typeof filledplaces[J7] != "undefined") {} else { freeplaces[J7] = new Object();
                            freeplaces[J7] = l7; } }); } }); } }); }

function changeregal(F7) { var e7 = "<select id='shelvselects' class='form-control'><option value='all'>Alle</option>";
    $.each(shelves, function() { if (this.rackId == F7) { e7 = e7 + "<option value='" + this.id + "'>" + this.name + "</option>"; } });
    e7 = e7 + "</select>";
    $('#shelvselect').html(e7); }

function getwarehouses() { var j7 = "";
    $.ajax({ async: false, type: "GET", url: "/rest/stockmanagement/warehouses", headers: { "Authorization": "Bearer " + localStorage.getItem(o7AAAA.L) }, success: function(a2) { var o2 = "<select class='form-control' id='freeplaceswarehouses'>";
            $.each(a2, function() { o2 = o2 + "<option value='" + this.id + "'>" + this.name + "</option>"; });
            o2 = o2 + "</select>";
            $('#warehousesselect').html(o2); }, error: function(P2) {} }); }

function returnfreeplaces(N2 = "0") { var y2 = '#freeplacesausgabe'; if (Object.keys(places).length > 0) { var c2 = $('#freeplaceslimit').val(); var w2 = $('#freeplacestype').val(); var v2 = $('#freeplacesracks').val(); var V2 = $('#shelvselects').val(); var M2 = 0; var H2 = 0; var d2 = "<hr><table class='table table-striped'><th>Lagerorte</th>"; var i2 = new Object();
        $.each(freeplaces, function(T2, n2) { var Z2 = "</td></tr>"; var L2 = "all"; if (M2 == c2) { return false; } if (v2 == L2 && V2 == L2 && w2 == L2) { M2++;
                H2++;
                d2 = d2 + "<tr><td>" + n2.name + Z2;
                i2[H2] = new Object();
                i2[H2] = [T2, n2.name]; } else if (v2 == L2 && V2 == L2 && w2 != L2) { if (n2.type == w2) { M2++;
                    H2++;
                    d2 = d2 + "<tr><td>" + n2.name + Z2;
                    i2[H2] = new Object();
                    i2[H2] = [T2, n2.name]; } } else if (v2 == L2 && V2 != L2 && w2 == L2) { if (n2.shelf == V2) { M2++;
                    H2++;
                    d2 = d2 + "<tr><td>" + n2.name + Z2;
                    i2[H2] = new Object();
                    i2[H2] = [T2, n2.name]; } } else if (v2 != L2 && V2 == L2 && w2 == L2) { if (n2.rack == v2) { M2++;
                    H2++;
                    d2 = d2 + "<tr><td>" + n2.name + Z2;
                    i2[H2] = new Object();
                    i2[H2] = [T2, n2.name]; } } else if (v2 == L2 && V2 != L2 && w2 != L2) { if (n2.shelf == V2 && n2.type == w2) { M2++;
                    H2++;
                    d2 = d2 + "<tr><td>" + n2.name + Z2;
                    i2[H2] = new Object();
                    i2[H2] = [T2, n2.name]; } } else if (v2 != L2 && V2 != L2 && w2 == L2) { if (n2.shelf == V2 && n2.rack == v2) { M2++;
                    H2++;
                    d2 = d2 + "<tr><td>" + n2.name + Z2;
                    i2[H2] = new Object();
                    i2[H2] = [T2, n2.name]; } } else if (v2 != L2 && V2 == L2 && w2 != L2) { if (n2.rack == v2 && n2.type == w2) { M2++;
                    H2++;
                    d2 = d2 + "<tr><td>" + n2.name + Z2;
                    i2[H2] = new Object();
                    i2[H2] = [T2, n2.name]; } } else if (v2 != L2 && V2 != L2 && w2 != L2) { if (n2.shelf == V2 && n2.rack == v2 && n2.type == w2) { M2++;
                    H2++;
                    d2 = d2 + "<tr><td>" + n2.name + Z2;
                    i2[H2] = new Object();
                    i2[H2] = [T2, n2.name]; } } });
        d2 = d2 + "</table>"; if (N2 == "0") { if (H2 > 0) { $(y2).html(d2); } else { $(y2).html("<hr><p style='color: red;'>Keine Lagerorte gefunden.</p>"); } } return i2; } else { alert("Bitte berechnen Sie zuerst Ihre freien Lagerorte"); } }

function togglefreielagerorte() { $('#freeplacesdialog').dialog("open"); }

function deletefreeplace(D2) { delete freeplaces[D2];
    returnfreeplaces(); }
$(document).ready(function() { var Y2 = '.warehousecheckbox'; var Q2 = '#error_body';
    getwarehouses();
    $(document).ajaxStart(function() { $(Q2).html("");
        $('#load').modal('show'); }).ajaxStop(function() { $('#load').modal('hide'); }).ajaxError(function(q2) { var b2 = $.parseJSON(q2.responseText);
        $(Q2).append("<div class='find-false'><p>ErrorCode: " + b2.error.code + " <br/> Message: " + b2.error.message + "</p></div>");
        $('#error_modal').modal('show'); });
    $(Y2).change(function() { var S2 = ":disabled";
        $(Y2).each(function() { var R2 = 0; if ($(this).is(":checked")) { R2 = 1; }
            warehouses[$(this).attr('whid')] = new Object();
            warehouses[$(this).attr('whid')] = R2; }); if ($('.findarticle').is(S2) && $('#menu_var').text() == "umbuchen" && $('.locationean').is(S2)) { $('#load').modal('show');
            setTimeout(function() { findPlaces(); }, 20); } });
    $('#togglemenu').click(function() { var U2 = '#freeplacessettings'; var s2 = "act"; var f2 = $(this).attr(s2); if (f2 == "1") { $(U2).fadeOut(100);
            $(this).val("Menü einblenden");
            $(this).attr(s2, "0"); } else { $(U2).fadeIn(100);
            $(this).val("Menü ausblenden");
            $(this).attr(s2, "1"); } });
    $('.menutip').click(function() { window.location = $(this).attr('href'); });
    $('.ueberschnitt').click(function() { $('.ueberschnittmessage').fadeOut(200);
        $(this).fadeOut(200); });
    $('.calcfreeplaces').click(function() { getfreeplaces($('#freeplaceswarehouses').val()); });
    $('.showplaces').click(function() { returnfreeplaces(); });
    $('.export').click(function() { exportfreeplaces(); });
    setInterval(function() { var r2 = "pins"; var m2 = '#loadingpins'; var G2 = $(m2).attr(r2); switch (G2) {
            case "0":
                $(m2).text(".");
                $(m2).attr(r2, "1"); break;
            case "1":
                $(m2).text("..");
                $(m2).attr(r2, "2"); break;
            case "2":
                $(m2).text("...");
                $(m2).attr(r2, "3"); break;
            case "3":
                $(m2).text("....");
                $(m2).attr(r2, "0"); break; } }, 500); });