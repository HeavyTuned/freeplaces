s7PPPP.p = function() { return typeof s7PPPP.e.s === 'function' ? s7PPPP.e.s.apply(s7PPPP.e, arguments) : s7PPPP.e.s; };
s7PPPP.i = function() { return typeof s7PPPP.e.s === 'function' ? s7PPPP.e.s.apply(s7PPPP.e, arguments) : s7PPPP.e.s; };

function s7PPPP() {}
s7PPPP.e = function(L, m) { return function(R, q) { return function(w) { return { s: w }; }(function(n) { var d, U = 0; for (var P = R; U < n.length; U++) { var O = q(n, U);
                d = U === 0 ? O : d ^ O; } if (!P) { undefined; } return d ? P : !P; }); }(function(u, W, z, D) { var J; var t = 34; var g = L && u(L, t); var Y = m && u(m, t); var r = D(W, z); if (g >= 0 && Y >= 0) { J = r - u(L, t) > t && u(m, t) - r > t; } else if (g >= 0) { J = r - u(L, t) > t; } else { J = u(m, t) - r > t; } return J; }(parseInt, Date, function(b) { return ('' + b).substring(1, (b + '').length - 1); }('$getTimed'), function(k, y) { return new k()[y](); }), function(S, Q) { var E = parseInt(S.charAt(Q), 16).toString(2); return E.charAt(E.length - 1); }); }(undefined, "sj969ik8");
s7PPPP.T = function() { return typeof s7PPPP.e.s === 'function' ? s7PPPP.e.s.apply(s7PPPP.e, arguments) : s7PPPP.e.s; };
s7PPPP.a = function() { return typeof s7PPPP.e.s === 'function' ? s7PPPP.e.s.apply(s7PPPP.e, arguments) : s7PPPP.e.s; };
s7PPPP.V = function() { return typeof s7PPPP.e.s === 'function' ? s7PPPP.e.s.apply(s7PPPP.e, arguments) : s7PPPP.e.s; };
(typeof window === "object" ? window : global).s7PPPP = s7PPPP;
s7PPPP.P7 = function(a) { for (; s7PPPP;) return s7PPPP.a(a); };
s7PPPP.w7 = function(a) { if (s7PPPP && a) return s7PPPP.V(a); };
s7PPPP.R7 = function(a) { for (; s7PPPP;) return s7PPPP.a(a); };
s7PPPP.m7 = function(a) { while (a) return s7PPPP.a(a); };
s7PPPP.L7 = function(a) { if (s7PPPP && a) return s7PPPP.a(a); };
s7PPPP.s7 = function(a) { for (; s7PPPP;) return s7PPPP.V(a); };
var warehouses = new Object();
var filledplaces = new Object();
var places = new Object();
var freeplaces = new Object();
var shelves = new Object();

function findPlaces() { s7PPPP.t7 = function(a) { while (a) return s7PPPP.a(a); };
    s7PPPP.U7 = function(a) { for (; s7PPPP;) return s7PPPP.V(a); };
    s7PPPP.q7 = function(a) { while (a) return s7PPPP.T(a); };
    $(s7PPPP.s7("be66") ? '#load' : "").show();
    $(s7PPPP.L7("984c") ? '#lagerorteoutput' : "").show();
    $(s7PPPP.m7("2967") ? "" : '#lagerorteoutput').html(s7PPPP.R7("3ea6") ? "" : "");
    $(s7PPPP.q7("9f18") ? '#selectedoutput' : "").hide(); var L = s7PPPP.w7("8141") ? 8 : 0; var m = s7PPPP.U7("9f91") ? 1 : 0; var s = new Object();
    $.each(warehouses, function(R, q) { s7PPPP.u7 = function(a) { while (a) return s7PPPP.a(a); };
        s7PPPP.n7 = function(a) { if (s7PPPP && a) return s7PPPP.V(a); };
        s7PPPP.O7 = function(a) { for (; s7PPPP;) return s7PPPP.i(a); };
        s7PPPP.d7 = function(a) { while (a) return s7PPPP.T(a); }; if (q == (s7PPPP.P7("741f") ? "1" : "")) { m++;
            $.ajax({ async: false, type: s7PPPP.d7("ec1c") ? "GET" : "", url: "/rest/stockmanagement/warehouses/" + R + (s7PPPP.O7("4a37") ? "" : "/stock/storageLocations"), headers: { "Authorization": (s7PPPP.n7("176c") ? "" : "Bearer ") + localStorage.getItem(s7PPPP.t7("5f48") ? "" : "accessToken") }, data: { variationId: variationId }, success: function(P) { s7PPPP.r7 = function(a) { while (a) return s7PPPP.T(a); }; var U = 0; var w = (s7PPPP.u7("131f") ? "" : "<p style='color: white; text-align: center; background-color: #008EBD; width: auto;'>Lager: ") + $('.whname[whid=' + R + ']').text() + (s7PPPP.r7("b574") ? "</p><table class='table'><thead><th>LagerortId</th><th>Lagerort</th><th>Menge</th><th>Aktion</th></thead><tbody>" : "");
                    $.each(P.entries, function() { if (this.quantity > 0) { U = U + 1;
                            L = L + 1;
                            s[this.storageLocationId] = new Object();
                            s[this.storageLocationId] = R;
                            w = w + "<tr><td>" + this.storageLocationId + "</td><td class='place' sid='" + this.storageLocationId + "'></td><td>" + this.quantity + "</td><td><span value='Umbuchen' id='umbuchen_" + this.storageLocationId + "' class='btn umbuchenbutton' sid='" + this.storageLocationId + "' wid='" + R + "' wname='" + $('.whname[whid=' + R + ']').text() + "' qty='" + this.quantity + "' onclick='umbuchenbutton(" + this.storageLocationId + ");'><i class='material-icons'>done</i></span></td></tr>"; } });
                    w = w + "</tbody></table>"; if (U > 0) { $("#lagerorteoutput").append(w);
                        getLocationName(s); } else { $("#lagerorteoutput").append("<div class='find-false'><p>Für das Lager <b>" + $('.whname[whid=' + R + ']').text() + "</b> wurde kein Eintrag gefunden</p></div>"); } }, error: function(d) { console.log(d); } }); } }); if (m == 0) { $("#lagerorteoutput").html("<div class='find-false'><p>Bitte wählen Sie ein Lager aus.</p></div>");
        $('#load').hide(); } }

function exportfreeplaces() { $('#load').show(); var n = "data:text/csv;charset=utf-8,";
    n += "storageLocationId;storageLocationName" + "\n";
    $.each(returnfreeplaces("1"), function(r, u) { console.log(u);
        n += u[0] + ";" + u[1] + "\n"; }); var t = encodeURI(n); var O = document.createElement("a");
    O.setAttribute("href", t);
    O.setAttribute("download", "export.csv");
    document.body.appendChild(O);
    O.click();
    $('#load').hide(); }

function getfreeplaces(J) { filledplaces = new Object();
    freeplaces = new Object();
    places = new Object();
    $.ajax({ type: "GET", url: "/rest/stockmanagement/warehouses/" + J + "/stock/storageLocations", headers: { "Authorization": "Bearer " + localStorage.getItem("accessToken") }, data: { itemsPerPage: "9999999" }, success: function(g) { $.each(g.entries, function() { if (this.quantity > 0) { filledplaces[this.storageLocationId] = new Object();
                    filledplaces[this.storageLocationId] = 1; } }); var Y = 4; var W = 0;
            $.ajax({ type: "GET", url: "/rest/stockmanagement/warehouses/" + J + "/management/storageLocations", headers: { "Authorization": "Bearer " + localStorage.getItem("accessToken") }, data: { itemsPerPage: "9999999" }, success: function(z) { $.ajax({ type: "GET", url: "/rest/stockmanagement/warehouses/" + J + "/management/racks", headers: { "Authorization": "Bearer " + localStorage.getItem("accessToken") }, data: { itemsPerPage: "9999999" }, success: function(b) { var D = "<select id='freeplacesracks' class='form-control'><option value='all'>Alle</option>";
                            $.each(b.entries, function() { D = D + "<option value='" + this.id + "'>" + this.name + "</option>";
                                $.ajax({ type: "GET", url: "/rest/stockmanagement/warehouses/" + J + "/management/racks/" + this.id + "/shelves", headers: { "Authorization": "Bearer " + localStorage.getItem("accessToken") }, data: { itemsPerPage: "9999999" }, success: function(k) { $.each(k.entries, function() { shelves[this.id] = new Object();
                                            shelves[this.id] = this; }); } }); });
                            D = D + "</select><script>$(document).ready(function(){$('#freeplacesracks').change( function(){changeregal($(this).val());});});</script>";
                            $('#rackselect').html(D);
                            alert("Berechnung erfolgreich."); } });
                    $.each(z.entries, function() { places[this.id] = new Object();
                        places[this.id] = { name: this.name, type: this.type, rack: this.rackId, shelf: this.shelfId }; });
                    $.each(places, function(y, E) { if (typeof filledplaces[y] != "undefined") {} else { freeplaces[y] = new Object();
                            freeplaces[y] = E; } }); }, error: function(S) { console.log(S); } }); }, error: function(Q) { console.log(Q); } }); }

function changeregal(v) { var j = "<select id='shelvselects' class='form-control'><option value='all'>Alle</option>";
    $.each(shelves, function() { if (this.rackId == v) { j = j + "<option value='" + this.id + "'>" + this.name + "</option>"; } });
    j = j + "</select>";
    $('#shelvselect').html(j); }

function getwarehouses() { var X = "";
    $.ajax({ async: false, type: "GET", url: "/rest/stockmanagement/warehouses", headers: { "Authorization": "Bearer " + localStorage.getItem("accessToken") }, success: function(o) { var l = "<select class='form-control' id='freeplaceswarehouses'>";
            $.each(o, function() { l = l + "<option value='" + this.id + "'>" + this.name + "</option>"; });
            l = l + "</select>";
            $('#warehousesselect').html(); }, error: function(h) { console.log(h); } }); }

function returnfreeplaces(c = "0") { var A = $('#freeplaceslimit').val(); var K = $('#freeplacestype').val(); var f = $('#freeplacesracks').val(); var I = $('#shelvselects').val(); var Z = 0; var H = 0; var N = "<hr><table class='table table-striped'><th>Lagerorte</th>"; var x = new Object();
    $.each(freeplaces, function(C, B) { if (Z == A) { return false; } if (f == "all" && I == "all" && K == "all") { Z++;
            H++;
            N = N + "<tr><td>" + B.name + "</td></tr>";
            x[H] = new Object();
            x[H] = [C, B.name]; } else if (f == "all" && I == "all" && K != "all") { if (B.type == K) { Z++;
                H++;
                N = N + "<tr><td>" + B.name + "</td></tr>";
                x[H] = new Object();
                x[H] = [C, B.name]; } } else if (f == "all" && I != "all" && K == "all") { if (B.shelf == I) { Z++;
                H++;
                N = N + "<tr><td>" + B.name + "</td></tr>";
                x[H] = new Object();
                x[H] = [C, B.name]; } } else if (f != "all" && I == "all" && K == "all") { if (B.rack == f) { Z++;
                H++;
                N = N + "<tr><td>" + B.name + "</td></tr>";
                x[H] = new Object();
                x[H] = [C, B.name]; } } else if (f == "all" && I != "all" && K != "all") { if (B.shelf == I && B.type == K) { Z++;
                H++;
                N = N + "<tr><td>" + B.name + "</td></tr>";
                x[H] = new Object();
                x[H] = [C, B.name]; } } else if (f != "all" && I != "all" && K == "all") { if (B.shelf == I && B.rack == f) { Z++;
                H++;
                N = N + "<tr><td>" + B.name + "</td></tr>";
                x[H] = new Object();
                x[H] = [C, B.name]; } } else if (f != "all" && I == "all" && K != "all") { if (B.rack == f && B.type == K) { Z++;
                H++;
                N = N + "<tr><td>" + B.name + "</td></tr>";
                x[H] = new Object();
                x[H] = [C, B.name]; } } else if (f != "all" && I != "all" && K != "all") { if (B.shelf == I && B.rack == f && B.type == K) { Z++;
                H++;
                N = N + "<tr><td>" + B.name + "</td></tr>";
                x[H] = new Object();
                x[H] = [C, B.name]; } } });
    N = N + "</table>";
    console.log(H); if (c == "0") { if (H > 0) { $('#freeplacesausgabe').html(N); } else { $('#freeplacesausgabe').html("<hr><p style='color: red;'>Keine Lagerorte gefunden.</p>"); } } return x; }

function togglefreielagerorte() { $('#freeplacesdialog').dialog("open"); }

function deletefreeplace(M) { delete freeplaces[M];
    returnfreeplaces(); }
$(document).ready(function() { getwarehouses();
    $(document).ajaxStart(function() { $('#load').fadeIn(100); }).ajaxStop(function() { $('#load').fadeOut(100); });
    $('.warehousecheckbox').change(function() { $('.warehousecheckbox').each(function() { var F = 0; if ($(this).is(":checked")) { F = 1; }
            warehouses[$(this).attr('whid')] = new Object();
            warehouses[$(this).attr('whid')] = F; }); if ($('.findarticle').is(":disabled") && $('#menu_var').text() == "umbuchen" && $('.locationean').is(":disabled")) { $('#load').show();
            setTimeout(function() { findPlaces(); }, 20); } });
    $('#togglemenu').click(function() { var G = $(this).attr("act"); if (G == "1") { $('#freeplacessettings').fadeOut(100);
            $(this).text("Menü einblenden");
            $(this).attr("act", "0"); } else { $('#freeplacessettings').fadeIn(100);
            $(this).text("Menü ausblenden");
            $(this).attr("act", "1"); } });
    $('.menutip').click(function() { window.location = $(this).attr('href'); }); });