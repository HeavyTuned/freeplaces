!function e(t,a,o){function n(i,s){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[i]={exports:{}};t[i][0].call(d.exports,function(e){var a=t[i][1][e];return n(a||e)},d,d.exports,e,t,a,o)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=function(){function e(){var t=this;o(this,e),this.filledplaces={},this.places={},this.freeplaces={},this.zones={},this.config={storageLocationIDStart:12140,storageLocationIDEnd:null,warehouseId:1},this.loadFreePlaces(),$(".calcplaces").click(function(){t.loadFreePlaces()}),$(".showplaces").click(function(){t.displayFreePlaces()}),$(".export").click(function(){t.exportFreePlacesAsCSV()}),$(".pdf").click(function(){t.exportFreePlacesAsPDF()}),$(document).ajaxStart(function(){$("#error_body").html(""),$("#load").modal("show")}).ajaxStop(function(){$("#load").modal("hide")}).ajaxError(function(e){var t=$.parseJSON(e.responseText);$("#error_body").append("<div class='find-false'><p>ErrorCode: "+t.error.code+" <br/> Message: "+t.error.message+"</p></div>"),$("#error_modal").modal("show")}),setInterval(function(){switch($("#loadingpins").attr("pins")){case"0":$("#loadingpins").text("."),$("#loadingpins").attr("pins","1");break;case"1":$("#loadingpins").text(".."),$("#loadingpins").attr("pins","2");break;case"2":$("#loadingpins").text("..."),$("#loadingpins").attr("pins","3");break;case"3":$("#loadingpins").text("...."),$("#loadingpins").attr("pins","0")}},500),setTimeout(function(){$(".ueberschnittmessage").fadeOut(250)},7500)}return n(e,[{key:"getJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];$.ajax({type:"GET",url:e,headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")},data:t,success:function(e){a(e)},error:function(e,o){a(t)}})}},{key:"loadFreePlaces",value:function(){var e=this;$("#load").show(),this.getJSON("/rest/stockmanagement/warehouses/"+this.config.warehouseId+"/stock/storageLocations",{itemsPerPage:"9999999"},function(t){$.each(t.entries,function(t){if(t.quantity>0){if(t.storageLocationId<=12140)return!0;e.filledplaces[t.storageLocationId]={},e.filledplaces[t.storageLocationId]=1}});e.getJSON("/rest/stockmanagement/warehouses/"+e.config.warehouseId+"/management/storageLocations",{itemsPerPage:"9999999"},function(t){$.each(t.entries,function(t){if(console.log(t),t.id<e.config.storageLocationIDStart)return!0;e.places[t.id]={},e.places[t.id]={name:t.name,type:t.type,rack:t.rackId,shelf:t.shelfId}}),$("#zoneSelect").empty().append('<option value="Alle">Alle</option>'),$.each(e.places,function(t,a){if(void 0!==e.filledplaces[t]){e.freeplaces[t]={},e.freeplaces[t]=a,console.log(a.name+" is free");var o=a.name.split("-");e.zones[o[0]]=o[0],$("#zoneSelect").append('<option value="'+o[0]+'">'+o[0]+"</option>")}}),$("#load").hide()})})}},{key:"getFreePlaces",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Object.keys(this.places).length>0){var t=$("#freeplaceslimit").val(),a=$("#zoneSelect").val(),o=0,n=0,r="<table class='table table-striped table-bordered'><th>storageLocationId</th><th>storageLocationName</th>",i={};return console.log(this.freeplaces),$.each(this.freeplaces,function(e,s){return!(o>=t)&&(("Alle"==a||-1!=s.name.indexOf(a))&&(o++,n++,r=r+"<tr><td>"+e+"</td><td>"+s.name+"</td></tr>",i[n]={},void(i[n]=[e,s.name])))}),r+="</table>","0"==e&&(n>0?$("#freeplacesausgabe").html(r):$("#freeplacesausgabe").html("<hr><p style='color: red;'>Keine Lagerorte gefunden.</p>")),"1"==e?(r=r.replace("<table","<table style='border-spacing: 2px !important;' "),r=r.replace("<td","<td style='padding: 2px;' ")):i}alert("Bitte berechnen Sie zuerst Ihre freien Lagerorte")}},{key:"displayFreePlaces",value:function(){this.getFreePlaces(0)}},{key:"exportFreePlacesAsPDF",value:function(){var e=new jsPDF("p","pt"),t=["StorageLocationId","StorageLocationName"],a=[],o=0;$.each(this.returnfreeplaces(2),function(){a[o]=this,o++}),e.autoTable(t,a,{theme:"striped",bodyStyles:{lineColor:1,lineWidth:1},headerStyles:{lineColor:1,lineWidth:1,fillColor:1,textColor:500}}),e.save("FreePlaces.pdf")}},{key:"exportFreePlacesAsCSV",value:function(){$("#load").modal("show");var e="data:text/csv;charset=utf-8,";e+="storageLocationId;storageLocationName\n",$.each(this.returnfreeplaces("2"),function(t,a){e+=a[0]+";"+a[1]+"\n"});var t=encodeURI(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","export.csv"),document.body.appendChild(a),a.click(),$("#load").modal("hide")}}]),e}();$(function(){new r})},{}]},{},[1]);